# JavaScript

## 클로저는 무엇이며, 어떻게/왜 사용하나요?

- 클로저는 함수와 그 함수가 선언된 렉시컬 환경의 조합입니다. "렉시컬"은 렉시컬 범위 지정이 변수가 사용 가능한 위치를 결정하기 위해 소스 코드 내에서 변수가 선언된 위치를 사용한다는 사실을 나타냅니다. 클로저는 외부 함수가 반환된 후에도 외부 함수의 변수 범위 체인에 접근할 수 있는 함수입니다.

- 외부함수의 변수에 접근할 수 있는 내부 함수

- 일반적으로 함수를 return 하여 사용

- return하는 내부 함수를 closure 함수라고 말함

- closure가 가지는 3가지 scope chain
  1. closure 자신에 대한 접근(closure function 내에 정의된 변수)
  2. 외부 함수의 변수에 대한 접근
  3. 전역 변수에 대한 접근

* 왜 클로저를 사용합니까?
  - 클로저로 데이터 프라이버시(외부에서 접근할 수 없도록)) / private method를 모방. 일반적으로 모듈 패턴에 사용됩니다.
  - 부분 적용 또는 currying.

- 자바스크립트는 함수를 어디서 호출했는지가 아니라 어디에 정의했는지에 따라 상위 스코프를 결정한다. 이를 렉시컬 스코프(정적 스코프)라 한다. 함수 객체의 내부 슬롯 [[Environment]] 에 저장한 현재 실행 중인 실행 컨텍스트의 렉시컬 환경의 참조가 바로 상위 스코프이다. 또한 자신이 호출되었을 때 생성될 렉시컬 환경의 “외부 렉시컬 환경에 대한 참조”에 저장될 참조값이다. 함수 객체는 내부 슬롯 [[Environment]]에 저장한 렉시컬 환경의 참조, 즉 상위 스코프를 자신이 존재하는 한 기억한다.

- 실행 컨택스트에서 렉시컬 환경안에 OuterLexicalEnvironmentReference 라는 곳에 위에서 말한 내부슬로 [[Environment]] 와 같은 값이 저장되어 있다 그래서 상위함수가 생명을 다해도 내부함수가 상위함수를 참조하고 있기 떄문에 실행 컨택스트스택에서만 사라지고 렉시컬 환경, 환경레코드 등이 살아있어서 상위함수의 값을 참조할 수 있게 된다.
